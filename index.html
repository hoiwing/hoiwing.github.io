<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Hoiwing&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hoiwing&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hoiwing&#39;s Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hoiwing&#39;s Blog">
  
    <link rel="alternate" href="/atom.xml" title="Hoiwing&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hoiwing&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hoiwing的程序员之旅</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-SSM框架的整合" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/18/SSM框架的整合/" class="article-date">
  <time datetime="2019-07-18T14:13:23.000Z" itemprop="datePublished">2019-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSM/">SSM</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/18/SSM框架的整合/">SSM框架整合</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Spring + SpringMVC + Mybatis</p>
<h1 id="1-导入jar包"><a href="#1-导入jar包" class="headerlink" title="1.导入jar包"></a>1.导入jar包</h1><p>asm-3.3.1.jar<br>cglib-2.2.2.jar<br>com.springsource.com.mchange.v2.c3p0-0.9.1.2.jar<br>com.springsource.freemarker-2.3.15.jar<br>com.springsource.org.aopalliance-1.0.0.jar<br>com.springsource.org.apache.commons.fileupload-1.2.0.jar<br>com.springsource.org.apache.commons.io-1.4.0.jar<br>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar<br>commons-logging-1.1.1.jar<br>javassist-3.17.1-GA.jar<br>jstl-1.2.jar<br>log4j-1.2.17.jar<br>log4j-api-2.0-rc1.jar<br>log4j-core-2.0-rc1.jar<br>mybatis-3.2.7.jar<br>mybatis-spring-1.2.2.jar<br>mysql-connector-java-5.1.5-bin.jar<br>oscache-2.4.1.jar<br>slf4j-api-1.7.5.jar<br>slf4j-log4j12-1.7.5.jar<br>spring-aop-3.2.0.RC2.jar<br>spring-aspects-3.2.0.RC2.jar<br>spring-beans-3.2.0.RC2.jar<br>spring-context-3.2.0.RC2.jar<br>spring-context-support-3.2.0.RC2.jar<br>spring-core-3.2.0.RC2.jar<br>spring-expression-3.2.0.RC2.jar<br>spring-jdbc-3.2.0.RC2.jar<br>spring-orm-3.2.0.RC2.jar<br>spring-oxm-3.2.0.RC2.jar<br>spring-test-3.2.0.RC2.jar<br>spring-tx-3.2.0.RC2.jar<br>spring-web-3.2.0.RC2.jar<br>spring-webmvc-3.2.0.RC2.jar  </p>
<h2 id="2-创建一个springmvc文件"><a href="#2-创建一个springmvc文件" class="headerlink" title="2.创建一个springmvc文件"></a>2.创建一个springmvc文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">      http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span><br><span class="line">      http://www.springframework.org/schema/mvc</span><br><span class="line">      http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span><br><span class="line">      http://www.springframework.org/schema/context</span><br><span class="line">      http://www.springframework.org/schema/context/spring-context-3.2.xsd</span><br><span class="line">      http://www.springframework.org/schema/aop</span><br><span class="line">      http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span><br><span class="line">      http://www.springframework.org/schema/tx</span><br><span class="line">      http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 1.注解扫描位置--&gt;</span><br><span class="line">    &lt;context:component-scan base-package=&quot;com.gyf.backoffice&quot;&gt;</span><br><span class="line">       &lt;!-- &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</span><br><span class="line">        &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Service&quot;/&gt;--&gt;</span><br><span class="line">    &lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;!-- 2.配置映射处理和适配器--&gt;</span><br><span class="line">    &lt;bean class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;/&gt;</span><br><span class="line">    &lt;bean class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 3.视图的解析器--&gt;</span><br><span class="line">    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot; /&gt;</span><br><span class="line">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h1 id="3-在web-xml配置"><a href="#3-在web-xml配置" class="headerlink" title="3.在web.xml配置"></a>3.在web.xml配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">		&lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">		&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">		&lt;!-- 3.0的springmvc 默认加载WEB-INF下的dispatcher-servlet.xml文件 3.2的springmvc </span><br><span class="line">			加载DispatcherServlet-servlet.xml文件 --&gt;</span><br><span class="line">		&lt;init-param&gt;</span><br><span class="line">			&lt;!-- 修改黑底springmvc加载的配置文件路径 --&gt;</span><br><span class="line">			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">			&lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;</span><br><span class="line">		&lt;/init-param&gt;</span><br><span class="line">		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">	&lt;/servlet&gt;</span><br><span class="line">	&lt;servlet-mapping&gt;</span><br><span class="line">		&lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>

<h1 id="4-配置SqlMappingConfig-xml"><a href="#4-配置SqlMappingConfig-xml" class="headerlink" title="4.配置SqlMappingConfig.xml"></a>4.配置SqlMappingConfig.xml</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 别名配置 --&gt;</span><br><span class="line">	&lt;typeAliases&gt;</span><br><span class="line">		&lt;!-- 批量配置别名：指定批量定义别名的类包，别名为类名（首字母大小写都可） --&gt;</span><br><span class="line">		&lt;package name=&quot;com.gyf.backoffice.domain&quot;/&gt;</span><br><span class="line">	&lt;/typeAliases&gt;</span><br><span class="line">	&lt;mappers&gt;</span><br><span class="line">		&lt;!-- 批量加载映射文件 --&gt;</span><br><span class="line">		&lt;package name=&quot;com.gyf.backoffice.mapper&quot;/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<h1 id="5-创建spring的applicaiontContext-xml"><a href="#5-创建spring的applicaiontContext-xml" class="headerlink" title="5.创建spring的applicaiontContext.xml"></a>5.创建spring的applicaiontContext.xml</h1><p>配置数据源和mybaties的session工厂</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span><br><span class="line">		http://www.springframework.org/schema/context</span><br><span class="line">		http://www.springframework.org/schema/context/spring-context-3.2.xsd</span><br><span class="line">		http://www.springframework.org/schema/aop</span><br><span class="line">		http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span><br><span class="line">		http://www.springframework.org/schema/tx</span><br><span class="line">		http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:property-placeholder location=&quot;classpath:db.properties&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 配置数据源 --&gt;</span><br><span class="line">    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;maxPoolSize&quot; value=&quot;30&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;minPoolSize&quot; value=&quot;2&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 配置sessionFactory --&gt;</span><br><span class="line">    &lt;bean class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot; id=&quot;sqlSessionFactoryBean&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;</span><br><span class="line">        &lt;!-- 指定配置文件位置 --&gt;</span><br><span class="line">        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis.xml&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 自动生成dao,mapper--&gt;</span><br><span class="line">    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;basePackage&quot; value=&quot;com.gyf.backoffice.mapper&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactoryBean&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--自动扫描Service--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:component-scan base-package=&quot;com.gyf.backoffice&quot;&gt;</span><br><span class="line">       &lt;!-- &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Service&quot;/&gt;</span><br><span class="line">        &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Component&quot;/&gt;</span><br><span class="line">        &amp;lt;!&amp;ndash;排除&amp;ndash;&amp;gt;</span><br><span class="line">        &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;--&gt;</span><br><span class="line">    &lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 5.配置事务管理器 --&gt;</span><br><span class="line">    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 6.开启事务注解--&gt;</span><br><span class="line">    &lt;tx:annotation-driven&gt;&lt;/tx:annotation-driven&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/18/SSM框架的整合/" data-id="cjyye5wy90002zhx7v1ijn254" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MyBatis/">MyBatis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringMVC/">SpringMVC</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-MyBatis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/MyBatis/" class="article-date">
  <time datetime="2019-07-14T07:30:16.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MyBatis/">MyBatis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/MyBatis/">MyBatis的开始</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需要关注 SQL 本身，而不需要花费精力去处理例如注册驱动、创建connection、创建statement、手动设置参数、结果集检索等jdbc繁杂的过程代码。</p>
<h2 id="1-环境准备："><a href="#1-环境准备：" class="headerlink" title="1. 环境准备："></a>1. 环境准备：</h2><p>mybaits的代码由github.com管理，下载地址：<a href="https://github.com/mybatis/mybatis-3/releases" target="_blank" rel="noopener">https://github.com/mybatis/mybatis-3/releases</a>  </p>
<ul>
<li>导入jar包：<br>  asm-3.3.1.jar<br>  cglib-2.2.2.jar<br>  commons-logging-1.1.1.jar<br>  javassist-3.17.1-GA.jar<br>  log4j-1.2.17.jar<br>  log4j-api-2.0-rc1.jar<br>  log4j-core-2.0-rc1.jar<br>  mybatis-3.2.7.jar<br>  mysql-connector-java-5.1.7-bin.jar<br>  slf4j-api-1.7.5.jar<br>  slf4j-log4j12-1.7.5.jar  </li>
<li>添加日志包<br>在classpath下创建log4j.properties如下：==【文件内容可以从mybatis-3.2.7.pdf中拷贝】==</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Global logging configuration</span><br><span class="line">log4j.rootLogger=DEBUG, stdout</span><br><span class="line"># Console output...</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure>

<p>日志级别在开发阶段设置成DEBUG，在生产阶段设置成INFO或者ERROR。</p>
<h2 id="2-开发步骤"><a href="#2-开发步骤" class="headerlink" title="2. 开发步骤"></a>2. 开发步骤</h2><ul>
<li><p>创建全局配置文件SqlMapConfig.xml；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!-- 配置mybatis的环境信息 --&gt;</span><br><span class="line">&lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">	&lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">		&lt;!-- 配置JDBC事务控制，由mybatis进行管理 --&gt;</span><br><span class="line">		&lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br><span class="line">		&lt;!-- 配置数据源，采用dbcp连接池 --&gt;</span><br><span class="line">		&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;characterEncoding=utf8&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;</span><br><span class="line">		&lt;/dataSource&gt;</span><br><span class="line">	&lt;/environment&gt;</span><br><span class="line">&lt;/environments&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--告诉mybatis加载映射文件--&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;!--第一种:写映射文件的名字--&gt;</span><br><span class="line">        &lt;!--&lt;mapper resource=&quot;com/gyf/mapper/UserMapper.xml&quot;&gt;&lt;/mapper&gt;--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--第二种:写类名,一定要有个映射文件与之对应</span><br><span class="line">        如果没有，那么在UserMapper要声明注解--&gt;</span><br><span class="line">        &lt;!--&lt;mapper class=&quot;com.gyf.mapper.UserMapper&quot;&gt;&lt;/mapper&gt;--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--第三种：可以写包名--&gt;</span><br><span class="line">        &lt;package name=&quot;mybatis.mapper&quot;&gt;&lt;/package&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建PO类：即与数据库中的表相映射的java对象</p>
</li>
<li><p>创建映射文件：在classpath下，创建sqlmap文件夹。在sqlmap目录下，创建User.xml映射文件。<br>==【Mybatis的映射文件头（可以从mybatis-3.2.7.pdf文件中拷贝）】==</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper    </span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;    </span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">	namespace：命名空间，它的作用就是对SQL进行分类化管理，可以理解为SQL隔离</span><br><span class="line">	注意：使用mapper代理开发时，namespace有特殊且重要的作用</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;test&quot;&gt;</span><br><span class="line">	&lt;!-- </span><br><span class="line">		[id]：statement的id，要求在命名空间内唯一  </span><br><span class="line">		[parameterType]：入参的java类型</span><br><span class="line">		[resultType]：查询出的单条结果集对应的java类型</span><br><span class="line">		[#&#123;&#125;]： 表示一个占位符?</span><br><span class="line">		[#&#123;id&#125;]：表示该占位符待接收参数的名称为id。注意：如果参数为简单类型时，#&#123;&#125;里面的参数名称可以是任意定义</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;select id=&quot;findUserById&quot; parameterType=&quot;int&quot; resultType=&quot;com.mybatis.domain.User&quot;&gt;</span><br><span class="line">		SELECT * FROM USER WHERE id = #&#123;id&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4></li>
</ul>
<p><strong>parameterType</strong>和<strong>resultType</strong><br>parameterType指定输入参数的java类型，可以填写别名或Java类的全限定名。<br>resultType指定输出结果的java类型，可以填写别名或Java类的全限定名。</p>
<p><strong>#{}和${}</strong>  </p>
<p>#{}：相当于预处理中的占位符？。</p>
<p>#{}里面的参数表示接收java输入参数的名称。</p>
<p>#{}可以接受HashMap、POJO类型的参数。<br>当接受简单类型的参数时，#{}里面可以是value，也可以是其他。</p>
<p>#{}可以防止SQL注入。<br>${}：相当于拼接SQL串，对传入的值不做任何解释的原样输出。<br>${}会引起SQL注入，所以要谨慎使用。<br>${}可以接受HashMap、POJO类型的参数。<br>当接受简单类型的参数时，${}里面只能是value。</p>
<p><strong>selectOne和selectList</strong><br>selectOne：只能查询0或1条记录，大于1条记录的话，会报错：<br>selectList：可以查询0或N条记录</p>
<h2 id="3-逆向工程："><a href="#3-逆向工程：" class="headerlink" title="3. 逆向工程："></a>3. 逆向工程：</h2><p>通过数据库中的单表，自动生成java代码。</p>
<ul>
<li><a href="https://github.com/mybatis/generator/releases/tag/mybatis-generator-1.3.2" target="_blank" rel="noopener">https://github.com/mybatis/generator/releases/tag/mybatis-generator-1.3.2</a></li>
<li>导入jar包：mybatis-generator-core-1.3.2.jar</li>
<li>创建配置文件<br>在classpath下，创建==generator.xml==配置文件：（文件内容可以从逆向工程的jar包中docs目录下的index.html中找到相关代码  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">  PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">  &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line">	</span><br><span class="line">  &lt;context id=&quot;mysqlTable&quot; targetRuntime=&quot;MyBatis3&quot;&gt;</span><br><span class="line">  	&lt;!-- 1.数据连接参数 --&gt;</span><br><span class="line">    &lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">        connectionURL=&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span><br><span class="line">        userId=&quot;root&quot;</span><br><span class="line">        password=&quot;123456&quot;&gt;</span><br><span class="line">    &lt;/jdbcConnection&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 2.默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，为 true时把JDBC DECIMAL </span><br><span class="line">			和 NUMERIC 类型解析为java.math.BigDecimal --&gt;</span><br><span class="line">    &lt;javaTypeResolver &gt;</span><br><span class="line">      &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot; /&gt;</span><br><span class="line">    &lt;/javaTypeResolver&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 3.生成模型的位置 --&gt;</span><br><span class="line">    &lt;javaModelGenerator targetPackage=&quot;com.mybatis.backoffice.domain&quot; targetProject=&quot;.\src&quot;&gt;</span><br><span class="line">      &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">      &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/javaModelGenerator&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 4.targetProject:mapper映射文件生成的位置 --&gt;</span><br><span class="line">    &lt;sqlMapGenerator targetPackage=&quot;com.mybatis.backoffice.mapper&quot;  targetProject=&quot;.\src&quot;&gt;</span><br><span class="line">      &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/sqlMapGenerator&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 5. targetPackage：mapper接口生成的位置 --&gt;</span><br><span class="line">    &lt;javaClientGenerator type=&quot;XMLMAPPER&quot; targetPackage=&quot;com.mybatis.backoffice.mapper&quot;  </span><br><span class="line">   		 targetProject=&quot;.\src&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/javaClientGenerator&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 6.要生成的表 --&gt;</span><br><span class="line">    &lt;table tableName=&quot;items&quot;/&gt;</span><br><span class="line">	&lt;table tableName=&quot;orderdetail&quot;/&gt;</span><br><span class="line">	&lt;table tableName=&quot;orders&quot;/&gt;</span><br><span class="line">	&lt;table tableName=&quot;user&quot;/&gt;</span><br><span class="line">  &lt;/context&gt;</span><br><span class="line">```  </span><br><span class="line">- 使用java类来执行逆向工程</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>public class Generator {<br>    public static void main(String[] args)  throws Exception{<br>        List<string> warnings = new ArrayList<string>();<br>        boolean overwrite = true;<br>        File configFile = new File(“config/generator.xml”);<br>        ConfigurationParser cp = new ConfigurationParser(warnings);<br>        Configuration config = cp.parseConfiguration(configFile);<br>        DefaultShellCallback callback = new DefaultShellCallback(overwrite);<br>        MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config,<br>                callback, warnings);<br>        myBatisGenerator.generate(null);<br>    }<br>}</string></string></p>
<pre><code>==mybatis逆向工程运行成功却没有生成相应的包和文件==  
解决办法  
原因：逆向工程中的路径问题，windows和mac等的文件系统路径不同
mac和Linux下应该使用./，windows下应该使用.\</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/14/MyBatis/" data-id="cjyye5wxv0001zhx73bmwgnvk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MyBatis/">MyBatis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SSM的Oscache页面缓存" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/05/SSM的Oscache页面缓存/" class="article-date">
  <time datetime="2019-07-05T13:02:31.000Z" itemprop="datePublished">2019-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Oscache/">Oscache</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/05/SSM的Oscache页面缓存/">Oscache缓存机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="导入jar包"><a href="#导入jar包" class="headerlink" title="导入jar包"></a>导入jar包</h2><p>ocache-x.x.x.jar<br>commons-logging.jar</p>
<h2 id="在index-jsp中测试"><a href="#在index-jsp中测试" class="headerlink" title="在index.jsp中测试 :"></a>在index.jsp中测试 :</h2><p>需要添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@taglib uri=&quot;http://www.opensymphony.com/oscache&quot; prefix=&quot;o&quot;%&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">现在的时间：&lt;%=new Date()%&gt;&lt;br&gt;</span><br><span class="line">&lt;ocache&gt;</span><br><span class="line">缓存的时间：&lt;%=new Date()%&gt;</span><br><span class="line">&lt;/ocache&gt;</span><br><span class="line"> &lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>得出两个时间是不同的  </p>
<h2 id="缓存的作用域"><a href="#缓存的作用域" class="headerlink" title="缓存的作用域"></a>缓存的作用域</h2><p>缓存默认存储在application域当中，可更改缓存数据。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ocache scope=&quot;session&quot;&gt;</span><br><span class="line">缓存的时间：&lt;%=new Date()%&gt;</span><br><span class="line">&lt;/ocache&gt;</span><br></pre></td></tr></table></figure>

<p>这样，不同浏览器访问时，缓存时间是不一样的，如果是application,不同浏览器访问同一个路径时，时间是一样的  </p>
<h4 id="也可以设置缓存更新："><a href="#也可以设置缓存更新：" class="headerlink" title="也可以设置缓存更新："></a>也可以设置缓存更新：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ocache time=&quot;4&quot;&gt;</span><br><span class="line">&lt;!-- 每4秒更新一次缓存--&gt;</span><br><span class="line">缓存的时间：&lt;%=new Date()%&gt;</span><br><span class="line">&lt;/ocache&gt;</span><br></pre></td></tr></table></figure>

<h3 id="缓存持久化"><a href="#缓存持久化" class="headerlink" title="缓存持久化"></a>缓存持久化</h3><p>创建oscache.properties这个配置文件必须在classpath下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cache.memory=false</span><br><span class="line">cache.persistence.class=com.opensymphony.oscache.plugins.diskpersistence.DiskPersistenceListener</span><br><span class="line">cache.path=C:\\test</span><br></pre></td></tr></table></figure>

<p>访问路径后会在test的application中创建缓存文件</p>
<h2 id="Oscache整合ssm项目"><a href="#Oscache整合ssm项目" class="headerlink" title="Oscache整合ssm项目"></a>Oscache整合ssm项目</h2><p>在web.xml中配置页面缓存：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置页面缓存 --&gt;</span><br><span class="line">	&lt;filter&gt;</span><br><span class="line">		&lt;filter-name&gt;oscache&lt;/filter-name&gt;	&lt;filter-class&gt;com.opensymphony.oscache.web.filter.CacheFilter&lt;/filter-class&gt;</span><br><span class="line">		&lt;init-param&gt;</span><br><span class="line">			&lt;param-name&gt;time&lt;/param-name&gt;</span><br><span class="line">			&lt;param-value&gt;3600&lt;/param-value&gt;</span><br><span class="line">		&lt;/init-param&gt;</span><br><span class="line">		&lt;init-param&gt;</span><br><span class="line">			&lt;param-name&gt;scope&lt;/param-name&gt;</span><br><span class="line">			&lt;param-value&gt;application&lt;/param-value&gt;</span><br><span class="line">		&lt;/init-param&gt;</span><br><span class="line">	&lt;/filter&gt;</span><br><span class="line"></span><br><span class="line">	&lt;filter-mapping&gt;</span><br><span class="line">		&lt;filter-name&gt;oscache&lt;/filter-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;/items/*&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/05/SSM的Oscache页面缓存/" data-id="cjyye5wyc0003zhx72crmwuiw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Oscache/">Oscache</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring的AOP.md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/05/Spring的AOP.md/" class="article-date">
  <time datetime="2019-07-05T13:02:31.000Z" itemprop="datePublished">2019-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/05/Spring的AOP.md/">Spring的AOP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-AOP概述"><a href="#1-AOP概述" class="headerlink" title="1.AOP概述"></a>1.AOP概述</h1><ul>
<li>AOP为Aspect Oriented Programming的缩写，意为：面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。  </li>
<li>利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率</li>
</ul>
<h1 id="2-AOP术语"><a href="#2-AOP术语" class="headerlink" title="2.AOP术语"></a>2.AOP术语</h1><ul>
<li>target：目标类，需要被代理的类。例如：UserService</li>
<li>Joinpoint(连接点):所谓连接点是指那些可能被拦截到的方法。例如：所有的方法</li>
<li>PointCut 切入点：已经被增强的连接点。例如：addUser()</li>
<li>advice 通知/增强，增强代码。例如：after、before</li>
<li>Weaving(织入):是指把增强advice应用到目标对象target来创建新的代理对象proxy的过程.</li>
<li>proxy 代理类</li>
<li>Aspect(切面): 是切入点pointcut和通知advice的结合<br> 一个线是一个特殊的面。<br> 一个切入点和一个通知，组成成一个特殊的面。  </li>
</ul>
<h1 id="3-AOP的配置"><a href="#3-AOP的配置" class="headerlink" title="3.AOP的配置"></a>3.AOP的配置</h1><ol>
<li><p>导入jar包：<br>pring-framework-3.0.2.RELEASE-dependencies\org.aspectj\com.springsource.org.aspectj.weaver\1.6.8.RELEASE</p>
</li>
<li><p>Spring 的AOP配置<br>以下为全自动编程方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!--xmlns xml namespace:xml命名空间--&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:p =&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">       xmlns:context =&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xmlns:aop =&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">                           http://www.springframework.org/schema/context</span><br><span class="line">                           http://www.springframework.org/schema/context/spring-context.xsd</span><br><span class="line">                           http://www.springframework.org/schema/aop</span><br><span class="line">                           http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;!--  配置UserService--&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;com.spring.service.UserServiceImpl&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 配置切面对象--&gt;</span><br><span class="line">    &lt;bean id=&quot;myAspect3&quot; class=&quot;com.spring.aspect.MyAspect3&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 配置 aop --&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">        &lt;!-- aop:指定切面--&gt;</span><br><span class="line">        &lt;aop:aspect ref=&quot;myAspect3&quot;&gt;</span><br><span class="line">            &lt;!--定义一个切入点--&gt;</span><br><span class="line">            &lt;aop:pointcut id=&quot;myPointcut&quot; expression=&quot;execution(* com.spring.service.UserServiceImpl.*(..))&quot;/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- 配置前置通知...--&gt;</span><br><span class="line">            &lt;!--&lt;aop:before method=&quot;myBefore&quot; pointcut-ref=&quot;myPointcut&quot; /&gt;--&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!--&lt;aop:after-returning method=&quot;myAfterReturning&quot; pointcut-ref=&quot;myPointcut&quot;/&gt;--&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!--配置环绕通知--&gt;</span><br><span class="line">            &lt;aop:around method=&quot;myAround&quot; pointcut-ref=&quot;myPointcut&quot;&gt;&lt;/aop:around&gt;</span><br><span class="line">        &lt;/aop:aspect&gt;</span><br><span class="line">    &lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import org.aopalliance.intercept.MethodInterceptor;</span><br><span class="line">import org.aopalliance.intercept.MethodInvocation;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 切面类：增加代码 与 切入点 结合</span><br><span class="line"> */</span><br><span class="line">public class MyAspect implements MethodInterceptor&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class="line">        //拦截方法</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;开启事务...&quot;);</span><br><span class="line">        //放行</span><br><span class="line">        Object retObj = mi.proceed();</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;拦截.....&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;提交事务...&quot;);</span><br><span class="line"></span><br><span class="line">        return retObj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class testSpring &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test1()&#123;</span><br><span class="line">        String xmlPath = &quot;com/spring/beans.xml&quot;</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(xmlPath);</span><br><span class="line">        UserService service = (UserService) context.getBean(&quot;userService&quot;);</span><br><span class="line">        service.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-基本AOP的事务配置"><a href="#4-基本AOP的事务配置" class="headerlink" title="4.基本AOP的事务配置"></a>4.基本AOP的事务配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line"></span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">                           http://www.springframework.org/schema/context</span><br><span class="line">                           http://www.springframework.org/schema/context/spring-context.xsd</span><br><span class="line">                           http://www.springframework.org/schema/aop</span><br><span class="line">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span><br><span class="line">                           http://www.springframework.org/schema/tx</span><br><span class="line">                           http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 使用spring的aop标签配置--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 1.配置通知事务管理器--&gt;</span><br><span class="line">    &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;</span><br><span class="line">        &lt;tx:attributes&gt;</span><br><span class="line">            &lt;tx:method name=&quot;transfer&quot; propagation=&quot;REQUIRED&quot; isolation=&quot;DEFAULT&quot;/&gt;</span><br><span class="line">        &lt;/tx:attributes&gt;</span><br><span class="line">    &lt;/tx:advice&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 2.事务与切入点关联 --&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">        &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(* gyf.service..*.*(..))&quot;&gt;&lt;/aop:advisor&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<p>测试同上</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/05/Spring的AOP.md/" data-id="cjyye5wyg0005zhx7qtoz8fqy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringAOP/">SpringAOP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring的实例化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/03/Spring的实例化/" class="article-date">
  <time datetime="2019-07-03T12:48:21.000Z" itemprop="datePublished">2019-07-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/03/Spring的实例化/">Spring的实例化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-使用构造方法实例化"><a href="#1-使用构造方法实例化" class="headerlink" title="1. 使用构造方法实例化"></a>1. 使用构造方法实例化</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">&lt;!--装配bean的三种方式，所谓的装配bean就是在xml写一个bean标签--&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 第一种方式: new 实现类--&gt;</span><br><span class="line"> &lt;bean id=&quot;userService1&quot; class=&quot;com.gyf.service.UserServiceImpl&quot;&gt;&lt;/bean&gt;  </span><br><span class="line"> &lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2-使用静态工厂方法实例化"><a href="#2-使用静态工厂方法实例化" class="headerlink" title="2. 使用静态工厂方法实例化"></a>2. 使用静态工厂方法实例化</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">&lt;!-- 第二种方式：通过静态工厂方法</span><br><span class="line">    spring的版本过低，3.0版本,把jdk改成1.7</span><br><span class="line">  --&gt;</span><br><span class="line"> &lt;bean id=&quot;userService2&quot; class=&quot;com.gyf.service.UserSereviceFactory1&quot; factory-method=&quot;createUserService&quot;&gt;&lt;/bean&gt; </span><br><span class="line"> &lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2-使用静态工厂方法实例化-1"><a href="#2-使用静态工厂方法实例化-1" class="headerlink" title="2. 使用静态工厂方法实例化"></a>2. 使用静态工厂方法实例化</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">&lt;!--第三种方式：通过实例工厂方法 --&gt;</span><br><span class="line"> &lt;!-- 创建实例factory2 bean--&gt;</span><br><span class="line"> &lt;bean id=&quot;factory2&quot; class=&quot;com.gyf.service.UserSereviceFactory2&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"> &lt;bean id=&quot;userService3&quot; factory-bean=&quot;factory2&quot; factory-method=&quot;createUserService&quot;&gt;&lt;/bean&gt;</span><br><span class="line"> &lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h1 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1()&#123;</span><br><span class="line">    ApplicationContext context = new ClassPathXmlApplicationContext(&quot;beans3.xml&quot;);</span><br><span class="line"></span><br><span class="line">    //new 对象</span><br><span class="line">    //IUserService userService1 = (IUserService) context.getBean(&quot;userService1&quot;);</span><br><span class="line">    //userService1.add();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //静态工厂</span><br><span class="line">    //IUserService userService2 = UserSereviceFactory1.createUserService();</span><br><span class="line">    //IUserService userService2 = (IUserService) context.getBean(&quot;userService2&quot;);</span><br><span class="line">    //userService2.add();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //实例工厂</span><br><span class="line">    //1.创建工厂</span><br><span class="line">   // UserSereviceFactory2 factory2 = new UserSereviceFactory2();</span><br><span class="line">    //IUserService userService3 = factory2.createUserService();</span><br><span class="line"></span><br><span class="line">    IUserService userService3 = (IUserService) context.getBean(&quot;userService3&quot;);</span><br><span class="line">    userService3.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/03/Spring的实例化/" data-id="cjyye5wyi0006zhx7vly7fpdx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SpringMVC.md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/02/SpringMVC.md/" class="article-date">
  <time datetime="2019-07-02T11:42:53.000Z" itemprop="datePublished">2019-07-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SpringMVC/">SpringMVC</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/02/SpringMVC.md/">记录第一次使用SpringMVC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><ul>
<li><p>Spring MVC是Spring提供的一个强大而灵活的web框架。借助于注解，Spring MVC提供了几乎是POJO的开发模式，使得控制器的开发和测试更加简单。这些控制器一般不直接处理请求，而是将其委托给Spring上下文中的其他bean，通过Spring的依赖注入功能，这些bean被注入到控制器中。</p>
</li>
<li><p>Spring MVC主要由DispatcherServlet、处理器映射【找控制器】、适配器【调用控制器的方法】、控制器【业务】、视图解析器、视图组成。</p>
</li>
</ul>
<h1 id="2-SpringMVC的配置"><a href="#2-SpringMVC的配置" class="headerlink" title="2.SpringMVC的配置"></a>2.SpringMVC的配置</h1><ol>
<li>导入jar包：<br>com.springsource.org.aopalliance-1.0.0.jar<br>com.springsource.org.apache.commons.logging-1.1.1.jar<br>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar<br>log4j-1.2.16.jar<br>spring-aop-3.2.0.RC2.jar<br>spring-aspects-3.2.0.RC2.jar<br>spring-beans-3.2.0.RC2.jar<br>spring-context-3.2.0.RC2.jar<br>spring-core-3.2.0.RC2.jar<br>spring-expression-3.2.0.RC2.jar<br>spring-jdbc-3.2.0.RC2.jar<br>spring-orm-3.2.0.RC2-sources.jar<br>spring-test-3.2.0.RC2.jar<br>spring-tx-3.2.0.RC2.jar<br>spring-web-3.2.0.RC2.jar<br>spring-webmvc-3.2.0.RC2.jar  </li>
<li>在web.xml配置DispatcherServlet  </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">       &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">       &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">       &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">   &lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line">   &lt;servlet-mapping&gt;</span><br><span class="line">       &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">       &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;</span><br><span class="line">   &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在WEB-INF目录下创建DispatcherServlet-servlet.xml</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;</span><br><span class="line">	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans </span><br><span class="line">		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd </span><br><span class="line">		http://www.springframework.org/schema/mvc </span><br><span class="line">		http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd </span><br><span class="line">		http://www.springframework.org/schema/context </span><br><span class="line">		http://www.springframework.org/schema/context/spring-context-3.2.xsd </span><br><span class="line">		http://www.springframework.org/schema/aop </span><br><span class="line">		http://www.springframework.org/schema/aop/spring-aop-3.2.xsd </span><br><span class="line">		http://www.springframework.org/schema/tx </span><br><span class="line">		http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;&gt;</span><br><span class="line">		&lt;!-- 1. 配置处理器映射，springmvc默认的处理器映射器</span><br><span class="line">			 BeanNameUrlHandlerMapping:根据bean的name属性的url去找handlerController --&gt;</span><br><span class="line">		&lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/&gt;</span><br><span class="line">		&lt;!-- 2. 配置处理器适配置器执行Controller --&gt;</span><br><span class="line">		&lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;/&gt;</span><br><span class="line">		&lt;!-- 3.配置一个控制器 --&gt;</span><br><span class="line">		&lt;bean name=&quot;/user.do&quot; class=&quot;com.springmvc.backoffice.web.controller.UserController&quot;/&gt;</span><br><span class="line">		&lt;!-- 4.配置springmvc视图解析器</span><br><span class="line">			视图解析器解析的视频路径为：前缀 + 后缀 --&gt;</span><br><span class="line">		&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span><br><span class="line">		&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>创建个Controller控制器</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.web.servlet.ModelAndView;</span><br><span class="line">import org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line">public class UserController implements Controller&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ModelAndView handleRequest(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        ModelAndView mav = new ModelAndView(&quot;user/userlist&quot;);</span><br><span class="line"></span><br><span class="line">        mav.addObject(&quot;name&quot;,&quot;springmvc&quot;);</span><br><span class="line">        return mav;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="SpringMVC的拦截器"><a href="#SpringMVC的拦截器" class="headerlink" title="SpringMVC的拦截器"></a>SpringMVC的拦截器</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class LoginInterceptor implements HandlerInterceptor&#123;</span><br><span class="line">	//controller执行后且视图返回后调用此方法</span><br><span class="line">	public void afterCompletion(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, Exception arg3)</span><br><span class="line">			throws Exception &#123;</span><br><span class="line">		System.out.println(&quot;返回视图前  后处理&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	//controller执行后但未返回视图前调用此方法</span><br><span class="line">	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, ModelAndView arg3)</span><br><span class="line">			throws Exception &#123;</span><br><span class="line">		System.out.println(&quot;未返回视图前 后处理....&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// controller执行前调用此方法</span><br><span class="line">	public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object obj) throws Exception &#123;</span><br><span class="line">		System.out.println(&quot;预处理....&quot;);</span><br><span class="line">		//在此设置拦截的条件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DispatcherServlet-servlet-xml添加登录拦截器配置："><a href="#DispatcherServlet-servlet-xml添加登录拦截器配置：" class="headerlink" title="DispatcherServlet-servlet.xml添加登录拦截器配置："></a>DispatcherServlet-servlet.xml添加登录拦截器配置：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置拦截器 --&gt;</span><br><span class="line">&lt;mvc:interceptors&gt;</span><br><span class="line">    &lt;!-- 登录拦截器 --&gt;</span><br><span class="line">    &lt;mvc:interceptor&gt;</span><br><span class="line">        &lt;mvc:mapping path=&quot;/**&quot;/&gt;</span><br><span class="line">        &lt;!-- 添加拦截器的路径 --&gt;</span><br><span class="line">        &lt;bean class=&quot;com.springmvc.backoffice.web.interceptor.LoginInterceptor&quot;/&gt;</span><br><span class="line">    &lt;/mvc:interceptor&gt;</span><br><span class="line">&lt;/mvc:interceptors&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/02/SpringMVC.md/" data-id="cjyyetrma000q23x73lumqy03" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringMVC/">SpringMVC</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/28/Spring/" class="article-date">
  <time datetime="2019-06-28T13:20:05.000Z" itemprop="datePublished">2019-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/28/Spring/">搭建Spring</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p>Spring是一个开源框架，Spring是于2003 年兴起的一个轻量级的Java 开发框架，由Rod Johnson 在其著作Expert One-On-One J2EE Development and Design中阐述的部分理念和原型衍生而来。它是为了解决企业应用开发的复杂性而创建的。Spring使用基本的JavaBean来完成以前只可能由EJB完成的事情。然而，Spring的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何Java应用都可以从Spring中受益<br>简单来说，Spring是一个轻量级的控制反转（IoC）和面向切面（AOP）的容器框架。</p>
<h2 id="1-导入核心包"><a href="#1-导入核心包" class="headerlink" title="1. 导入核心包"></a>1. 导入核心包</h2><p>spring-framework-4.2.0.RELEASE中的：<br>spring-core-3.2.2.RELEASE.jar<br>spring-beans-3.2.2.RELEASE.jar<br>spring-context-3.2.2.RELEASE.jar<br>spring-expression-3.2.2.RELEASE.jar<br>com.springsource.org.apache.commons.logging-1.1.1.jar</p>
<h2 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2. 配置文件"></a>2. 配置文件</h2><p>beans.xml，配置文件的约束可以访问：<br>spring-framework-3.2.0.RC2-docs/reference/html/xsd-config.html网页查看  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;</span><br><span class="line">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;gyf.service.UserServiceImpl&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br><span class="line">```  </span><br><span class="line">从beans.xml获取bean：</span><br></pre></td></tr></table></figure>

<p>public class testSpring {<br>    @Test<br>    public void test1(){<br>        ApplicationContext context = new ClassPathXmlApplicationContext(“bean.xml”);<br>        UserService service = (UserService) context.getBean(“userService”);<br>        service.add();<br>    }<br>}</p>
<pre><code>## 总结：【IoC】
IoC Inverse of Control 反转控制的概念，就是将原本在程序中手动创建UserService对象的控制权，交由Spring框架管理，简单说，就是创建UserService对象控制权被反转到了Spring框架

</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/28/Spring/" data-id="cjyye5wye0004zhx7c48ucm3s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oscache/">Oscache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringMVC/">SpringMVC</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oscache/">Oscache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/">SSM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringAOP/">SpringAOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/">SpringMVC</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/MyBatis/" style="font-size: 15px;">MyBatis</a> <a href="/tags/Oscache/" style="font-size: 10px;">Oscache</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/Spring/" style="font-size: 20px;">Spring</a> <a href="/tags/SpringAOP/" style="font-size: 10px;">SpringAOP</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/18/SSM框架的整合/">SSM框架整合</a>
          </li>
        
          <li>
            <a href="/2019/07/14/MyBatis/">MyBatis的开始</a>
          </li>
        
          <li>
            <a href="/2019/07/05/SSM的Oscache页面缓存/">Oscache缓存机制</a>
          </li>
        
          <li>
            <a href="/2019/07/05/Spring的AOP.md/">Spring的AOP</a>
          </li>
        
          <li>
            <a href="/2019/07/03/Spring的实例化/">Spring的实例化</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Hoiwing<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>

    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>